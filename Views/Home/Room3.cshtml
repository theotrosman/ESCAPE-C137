
@{
    Layout = null;
}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <title>Room 3 — Logs del Sistema</title>
    <style>
        body {
            background-color: black;
            color: #00ff00;
            font-family: monospace;
            padding: 40px;
            overflow-x: hidden;
        }
        #terminal, #logs, #mensaje-final, #mensajeExtra {
            white-space: pre-wrap;
            font-size: 16px;
            line-height: 1.5;
            margin-bottom: 30px;
        }
        .log { margin-bottom: 10px; }
        .log strong { color: cyan; }
        .flash { animation: flashBg 0.3s infinite alternate; }
        @keyframes flashBg {
            from { background-color: black; }
            to { background-color: red; }
        }
        input {
            background: black;
            border: none;
            border-bottom: 1px solid #00ff00;
            color: #00ff00;
            font-family: monospace;
            font-size: 16px;
            width: 400px;
        }
        button {
            background: #00ff00;
            color: black;
            border: none;
            padding: 10px 25px;
            font-family: monospace;
            cursor: pointer;
            margin-left: 10px;
        }
    </style>
</head>
<body>
<audio src="/img/rick-theme.mp3" autoplay loop></audio>

<div id="terminal"></div>
<div id="logs"></div>
<div id="input-section" style="display:none;">
    <p>[SISTEMA] Descubrí las claves ocultas y escribilas separadas por guiones:</p>
    <input id="logInput" type="text" placeholder="ej: puerta-verde-codigo" />
    <button onclick="completarLog()">ENVIAR</button>
</div>
<div id="mensaje-final"></div>
<div id="mensajeExtra"></div>

<script>
    const terminal = document.getElementById("terminal");
    const logs = document.getElementById("logs");
    const inputSection = document.getElementById("input-section");
    const mensajeFinal = document.getElementById("mensaje-final");
    const mensajeExtra = document.getElementById("mensajeExtra");

    const dialogo = [
        "Rick: Morty, tenemos acceso al núcleo del sistema.",
        "Morty: ¿Podemos salir?",
        "Rick: Solo si desciframos el patrón oculto en los logs.",
        "[SISTEMA] Logs habilitados. Iniciando transmisión..."
    ];

    const systemLogs = [
        "<span class='log'>[INFO] Inicializando módulo clave: <strong>puerta</strong></span>",
        "<span class='log'>[INFO] Carga del núcleo lógico... OK</span>",
        "<span class='log'>[WARN] clave parcial detectada: <strong>verde</strong></span>",
        "<span class='log'>[ERROR] Corrupción en matriz /r0.c0d3</span>",
        "<span class='log'>[INFO] clave final confirmada: <strong>codigo</strong></span>",
        "<span class='log'>[INFO] Esperando reconstrucción de comando por usuario...</span>"
    ];

    let i = 0;
    function mostrarDialogo() {
        if (i < dialogo.length) {
            terminal.innerHTML += dialogo[i] + "\n";
            i++;
            setTimeout(mostrarDialogo, 1800);
        } else {
            mostrarLogs();
        }
    }

    function mostrarLogs() {
        let l = 0;
        const interval = setInterval(() => {
            if (l < systemLogs.length) {
                logs.innerHTML += systemLogs[l] + "<br>";
                l++;
            } else {
                clearInterval(interval);
                setTimeout(() => inputSection.style.display = "block", 1000);
            }
        }, 1000);
    }

    function completarLog() {
        const val = document.getElementById("logInput").value.trim().toLowerCase();
        if (val === "puerta-verde-codigo") {
            document.body.classList.add("flash");
            mensajeFinal.innerHTML = "[SISTEMA] Validación completada. Ejecutando salto lógico...";
            setTimeout(() => {
                document.body.classList.remove("flash");
                mensajeExtra.innerHTML = "Rick: JAJAJA MORTY, obvio que no te iba a dejar. Era todo un truco para romper la estructura del código.<br><br>✔️ AMBOS LIBERADOS. Redirigiendo a Room 4...";
                setTimeout(() => window.location.href = "/Room4", 6000);
            }, 4000);
        } else {
            mensajeFinal.innerHTML = "Rick: Esa no es la secuencia correcta, Morty. Leé mejor los logs.";
        }
    }

    mostrarDialogo();
</script>
</body>
</html>
